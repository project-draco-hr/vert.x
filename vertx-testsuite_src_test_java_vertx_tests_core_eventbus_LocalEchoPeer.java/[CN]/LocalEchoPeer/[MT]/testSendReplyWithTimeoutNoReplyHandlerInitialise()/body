{
  String address="some-address";
  eb.registerHandler(address,new Handler<Message<String>>(){
    @Override public void handle(    final Message<String> message){
      message.replyWithTimeout("bar",TIMEOUT,new Handler<AsyncResult<Message<String>>>(){
        @Override public void handle(        AsyncResult<Message<String>> event){
          tu.azzert(event.failed(),"Should not get a reply after timeout");
          tu.azzert(event.cause() instanceof ReplyException);
          ReplyException re=(ReplyException)event.cause();
          tu.azzert(ReplyFailure.NO_HANDLERS == re.failureType());
          tu.testComplete();
        }
      }
);
    }
  }
,new Handler<AsyncResult<Void>>(){
    @Override public void handle(    AsyncResult<Void> res){
      if (res.succeeded()) {
        tu.testComplete();
      }
 else {
        tu.azzert(false,"Failed to register");
      }
    }
  }
);
}
