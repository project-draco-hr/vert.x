{
  eb.setDefaultReplyTimeout(TIMEOUT);
  String address="some-address";
  eb.registerHandler(address,new Handler<Message<String>>(){
    @Override public void handle(    final Message<String> message){
      vertx.setTimer(TIMEOUT * 2,new Handler<Long>(){
        @Override public void handle(        Long tid){
          message.reply("bar");
        }
      }
);
    }
  }
,new Handler<AsyncResult<Void>>(){
    @Override public void handle(    AsyncResult<Void> res){
      if (res.succeeded()) {
        tu.testComplete();
      }
 else {
        tu.azzert(false,"Failed to register");
      }
    }
  }
);
}
