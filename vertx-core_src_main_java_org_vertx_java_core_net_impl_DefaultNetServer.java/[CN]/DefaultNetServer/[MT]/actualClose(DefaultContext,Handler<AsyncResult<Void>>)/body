{
  if (id != null) {
    vertx.sharedNetServers().remove(id);
  }
  if (group != null) {
    for (    Channel sock : group) {
      ConnectionBase conn=sock.attr(VertxHandler.KEY).get();
      if (conn != null) {
        conn.close();
      }
    }
  }
  vertx.setContext(closeContext);
  ChannelGroupFuture fut=serverChannelGroup.close();
  fut.addListener(new ChannelGroupFutureListener(){
    public void operationComplete(    ChannelGroupFuture fut) throws Exception {
      executeCloseDone(closeContext,done,fut.cause());
    }
  }
);
}
