{
  final String dirName="some-dir";
  mkDir(dirName);
  final int numFiles=10;
  for (int i=0; i < numFiles; i++) {
    createFileWithJunk(dirName + pathSep + "foo-"+ i+ ".txt",100);
  }
  for (int i=0; i < numFiles; i++) {
    createFileWithJunk(dirName + pathSep + "bar-"+ i+ ".txt",100);
  }
  testReadDir(dirName,"foo.+",true,new Handler<String[]>(){
    public void handle(    String[] fileNames){
      tu.azzert(fileNames.length == numFiles);
      Set<String> fset=new HashSet<>();
      for (int i=0; i < numFiles; i++) {
        fset.add(fileNames[i]);
      }
      File dir=new File(TEST_DIR + pathSep + dirName);
      String root;
      try {
        root=dir.getCanonicalPath();
      }
 catch (      IOException e) {
        tu.exception(e,"failed to get path");
        return;
      }
      for (int i=0; i < numFiles; i++) {
        tu.azzert(fset.contains(root + pathSep + "foo-"+ i+ ".txt"));
      }
    }
  }
);
}
