{
  super(vertx,sessions,config);
  String wsRE=basePath + COMMON_PATH_ELEMENT_RE + "websocket";
  wsMatcher.addRegEx(wsRE,new Handler<WebSocketMatcher.Match>(){
    public void handle(    final WebSocketMatcher.Match match){
      if (log.isTraceEnabled())       log.trace("WS, handler");
      final Session session=new Session(vertx,sessions,config.getLong("heartbeat_period"),sockHandler);
      session.setInfo(match.ws.localAddress(),match.ws.remoteAddress(),match.ws.uri(),match.ws.headers());
      session.register(new WebSocketListener(match.ws,session));
    }
  }
);
  rm.getWithRegEx(wsRE,new Handler<HttpServerRequest>(){
    public void handle(    HttpServerRequest request){
      if (log.isTraceEnabled())       log.trace("WS, get: " + request.uri());
      request.response().setStatusCode(400);
      request.response().end("Can \"Upgrade\" only to \"WebSocket\".");
    }
  }
);
  rm.allWithRegEx(wsRE,new Handler<HttpServerRequest>(){
    public void handle(    HttpServerRequest request){
      if (log.isTraceEnabled())       log.trace("WS, all: " + request.uri());
      request.response().headers().set("Allow","GET");
      request.response().setStatusCode(405);
      request.response().end();
    }
  }
);
}
