{
  try {
    SSLContext context=SSLContext.getInstance("TLS");
    KeyManager[] keyMgrs=ksPath == null ? null : getKeyMgrs(vertx,ksPath,ksPassword);
    TrustManager[] trustMgrs;
    if (trustAll) {
      trustMgrs=new TrustManager[]{createTrustAllTrustManager()};
    }
 else {
      trustMgrs=tsPath == null ? null : getTrustMgrs(vertx,tsPath,tsPassword);
    }
    context.init(keyMgrs,trustMgrs,new SecureRandom());
    return context;
  }
 catch (  Exception e) {
    log.error("Failed to create context",e);
    throw new RuntimeException(e.getMessage());
  }
}
