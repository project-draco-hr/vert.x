{
  int consumed=0;
  if (chunk.isReadable()) {
    Buffer buff=Buffer.buffer(chunk.slice());
    resp.handleChunk(buff);
    if (paused) {
      numBytes+=chunk.readableBytes();
    }
 else {
      consumed=chunk.readableBytes();
    }
  }
  if (end) {
    handleEnd();
  }
  return consumed;
}
