{
  Http2Headers h=new DefaultHttp2Headers();
  h.method(method.name());
  h.path(uri);
  h.scheme("https");
  if (headers != null && headers.size() > 0) {
    for (    Map.Entry<String,String> header : headers) {
      h.add(Http2HeadersAdaptor.toLowerCase(header.getKey()),header.getValue());
    }
  }
  encoder.writeHeaders(handlerCtx,stream.id(),h,0,end && buf == null,handlerCtx.newPromise());
  if (buf != null) {
    writeBuffer(buf,end);
  }
 else {
    handlerCtx.flush();
  }
}
