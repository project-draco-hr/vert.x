{
synchronized (queue) {
    if (connection == conn) {
      connection=null;
      queue.connectionClosed();
    }
  }
}
