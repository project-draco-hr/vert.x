{
synchronized (queue) {
    if (allConnections.remove(conn)) {
      queue.connectionClosed();
    }
  }
}
