{
  int sendBufferSize=TestUtils.randomPositiveInt();
  int receiverBufferSize=TestUtils.randomPortInt();
  Random rand=new Random();
  boolean reuseAddress=rand.nextBoolean();
  int trafficClass=TestUtils.randomByte() + 128;
  boolean tcpNoDelay=rand.nextBoolean();
  boolean tcpKeepAlive=rand.nextBoolean();
  int soLinger=TestUtils.randomPositiveInt();
  boolean usePooledBuffers=rand.nextBoolean();
  int idleTimeout=TestUtils.randomPositiveInt();
  boolean ssl=rand.nextBoolean();
  JksOptions keyStoreOptions=new JksOptions();
  String ksPassword=TestUtils.randomAlphaString(100);
  keyStoreOptions.setPassword(ksPassword);
  String ksPath=TestUtils.randomAlphaString(100);
  keyStoreOptions.setPath(ksPath);
  JksOptions trustStoreOptions=new JksOptions();
  String tsPassword=TestUtils.randomAlphaString(100);
  trustStoreOptions.setPassword(tsPassword);
  String tsPath=TestUtils.randomAlphaString(100);
  trustStoreOptions.setPath(tsPath);
  String enabledCipher=TestUtils.randomAlphaString(100);
  String crlPath=TestUtils.randomUnicodeString(100);
  int port=1234;
  String host=TestUtils.randomAlphaString(100);
  int acceptBacklog=TestUtils.randomPortInt();
  boolean compressionSupported=rand.nextBoolean();
  int maxWebsocketFrameSize=TestUtils.randomPositiveInt();
  String wsSubProtocol=TestUtils.randomAlphaString(10);
  boolean is100ContinueHandledAutomatically=rand.nextBoolean();
  int maxChunkSize=rand.nextInt(10000);
  int maxInitialLineLength=rand.nextInt(10000);
  int maxHeaderSize=rand.nextInt(10000);
  boolean useAlpn=rand.nextBoolean();
  HttpVersion enabledProtocol=HttpVersion.values()[rand.nextInt(HttpVersion.values().length)];
  Http2Settings initialSettings=TestUtils.randomHttp2Settings();
  JsonObject json=new JsonObject();
  json.put("sendBufferSize",sendBufferSize).put("receiveBufferSize",receiverBufferSize).put("reuseAddress",reuseAddress).put("trafficClass",trafficClass).put("tcpNoDelay",tcpNoDelay).put("tcpKeepAlive",tcpKeepAlive).put("soLinger",soLinger).put("usePooledBuffers",usePooledBuffers).put("idleTimeout",idleTimeout).put("ssl",ssl).put("enabledCipherSuites",new JsonArray().add(enabledCipher)).put("crlPaths",new JsonArray().add(crlPath)).put("keyStoreOptions",new JsonObject().put("password",ksPassword).put("path",ksPath)).put("trustStoreOptions",new JsonObject().put("password",tsPassword).put("path",tsPath)).put("port",port).put("host",host).put("acceptBacklog",acceptBacklog).put("compressionSupported",compressionSupported).put("maxWebsocketFrameSize",maxWebsocketFrameSize).put("websocketSubProtocols",wsSubProtocol).put("handle100ContinueAutomatically",is100ContinueHandledAutomatically).put("maxChunkSize",maxChunkSize).put("maxInitialLineLength",maxInitialLineLength).put("maxHeaderSize",maxHeaderSize).put("useAlpn",useAlpn).put("enabledProtocols",new JsonArray().add(enabledProtocol.name())).put("initialSettings",new JsonObject().put("pushEnabled",initialSettings.isPushEnabled()).put("headerTableSize",initialSettings.getHeaderTableSize()).put("maxHeaderListSize",initialSettings.getMaxHeaderListSize()).put("maxConcurrentStreams",initialSettings.getMaxConcurrentStreams()).put("initialWindowSize",initialSettings.getInitialWindowSize()).put("maxFrameSize",initialSettings.getMaxFrameSize()));
  HttpServerOptions options=new HttpServerOptions(json);
  assertEquals(sendBufferSize,options.getSendBufferSize());
  assertEquals(receiverBufferSize,options.getReceiveBufferSize());
  assertEquals(reuseAddress,options.isReuseAddress());
  assertEquals(trafficClass,options.getTrafficClass());
  assertEquals(tcpKeepAlive,options.isTcpKeepAlive());
  assertEquals(tcpNoDelay,options.isTcpNoDelay());
  assertEquals(soLinger,options.getSoLinger());
  assertEquals(usePooledBuffers,options.isUsePooledBuffers());
  assertEquals(idleTimeout,options.getIdleTimeout());
  assertEquals(ssl,options.isSsl());
  assertNotSame(keyStoreOptions,options.getKeyCertOptions());
  assertEquals(ksPassword,((JksOptions)options.getKeyCertOptions()).getPassword());
  assertEquals(ksPath,((JksOptions)options.getKeyCertOptions()).getPath());
  assertNotSame(trustStoreOptions,options.getTrustOptions());
  assertEquals(tsPassword,((JksOptions)options.getTrustOptions()).getPassword());
  assertEquals(tsPath,((JksOptions)options.getTrustOptions()).getPath());
  assertEquals(1,options.getEnabledCipherSuites().size());
  assertTrue(options.getEnabledCipherSuites().contains(enabledCipher));
  assertEquals(1,options.getCrlPaths().size());
  assertEquals(crlPath,options.getCrlPaths().get(0));
  assertEquals(port,options.getPort());
  assertEquals(host,options.getHost());
  assertEquals(acceptBacklog,options.getAcceptBacklog());
  assertEquals(compressionSupported,options.isCompressionSupported());
  assertEquals(maxWebsocketFrameSize,options.getMaxWebsocketFrameSize());
  assertEquals(wsSubProtocol,options.getWebsocketSubProtocols());
  assertEquals(is100ContinueHandledAutomatically,options.isHandle100ContinueAutomatically());
  assertEquals(maxChunkSize,options.getMaxChunkSize());
  assertEquals(maxInitialLineLength,options.getMaxInitialLineLength());
  assertEquals(maxHeaderSize,options.getMaxHeaderSize());
  assertEquals(useAlpn,options.isUseAlpn());
  assertEquals(initialSettings,options.getInitialSettings());
  json.remove("keyStoreOptions");
  json.remove("trustStoreOptions");
  json.put("pfxKeyCertOptions",new JsonObject().put("password",ksPassword)).put("pfxTrustOptions",new JsonObject().put("password",tsPassword));
  options=new HttpServerOptions(json);
  assertTrue(options.getTrustOptions() instanceof PfxOptions);
  assertTrue(options.getKeyCertOptions() instanceof PfxOptions);
  json.remove("pfxKeyCertOptions");
  json.remove("pfxTrustOptions");
  json.put("pemKeyCertOptions",new JsonObject()).put("pemTrustOptions",new JsonObject());
  options=new HttpServerOptions(json);
  assertTrue(options.getTrustOptions() instanceof PemTrustOptions);
  assertTrue(options.getKeyCertOptions() instanceof PemKeyCertOptions);
}
