{
  container.deployVerticle(ChildVerticle.class.getName(),null,1,new AsyncResultHandler<String>(){
    public void handle(    final AsyncResult<String> res){
      tu.azzert(res.succeeded());
      tu.azzert(res.result() != null);
      tu.checkThread();
      vertx.setTimer(1000,new Handler<Long>(){
        public void handle(        Long tid){
          eb.registerHandler("test-handler",new Handler<Message<String>>(){
            public void handle(            Message<String> message){
              if ("stopped".equals(message.body())) {
                eb.unregisterHandler("test-handler",this);
                tu.testComplete();
              }
            }
          }
);
          container.undeployVerticle(res.result(),new Handler<AsyncResult<Void>>(){
            public void handle(            AsyncResult<Void> res2){
              tu.checkThread();
            }
          }
);
        }
      }
);
    }
  }
);
}
