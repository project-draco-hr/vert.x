{
  final long timeout=500;
  eb.setDefaultReplyTimeout(timeout);
  String address="some-address";
  eb.registerHandler(address,new Handler<Message<String>>(){
    @Override public void handle(    final Message<String> message){
      vertx.setTimer(timeout * 2,new Handler<Long>(){
        @Override public void handle(        Long tid){
          message.reply("bar");
        }
      }
);
    }
  }
);
  eb.send(address,"foo",new Handler<Message<String>>(){
    @Override public void handle(    Message<String> reply){
      tu.azzert(false,"reply handler should not be called");
    }
  }
);
  vertx.setTimer(timeout * 3,new Handler<Long>(){
    @Override public void handle(    Long tid){
      tu.testComplete();
    }
  }
);
  eb.setDefaultReplyTimeout(-1);
}
