{
  ch.read(buff,position,null,new java.nio.channels.CompletionHandler<Integer,Object>(){
    long pos=position;
    final DefaultFutureResult<Buffer> result=new DefaultFutureResult<>();
    private void done(){
      context.execute(new Runnable(){
        public void run(){
          buff.flip();
          writeBuff.setBytes(offset,buff);
          result.setResult(writeBuff).setHandler(handler);
        }
      }
);
    }
    public void completed(    Integer bytesRead,    Object attachment){
      if (bytesRead == -1) {
        done();
      }
 else       if (buff.hasRemaining()) {
        pos+=bytesRead;
        doRead(writeBuff,offset,buff,pos,handler);
      }
 else {
        done();
      }
    }
    public void failed(    final Throwable t,    Object attachment){
      context.execute(new Runnable(){
        public void run(){
          result.setFailure(t).setHandler(handler);
        }
      }
);
    }
  }
);
}
