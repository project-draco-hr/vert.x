{
  final SockInfo info=sockInfos.get(sock);
  if (info == null) {
    return;
  }
  if (replyAddress != null && !checkMaxHandlers(info)) {
    return;
  }
  final Handler<Message> replyHandler;
  if (replyAddress != null) {
    replyHandler=new Handler<Message>(){
      public void handle(      Message message){
        checkAddAccceptedReplyAddress(message.replyAddress());
        deliverMessage(sock,replyAddress,message);
        info.handlerCount--;
      }
    }
;
  }
 else {
    replyHandler=null;
  }
  if (log.isDebugEnabled()) {
    log.debug("Forwarding message to address " + address + " on event bus");
  }
  if (send) {
    eb.send(address,body,replyHandler);
    if (replyAddress != null) {
      info.handlerCount++;
    }
  }
 else {
    eb.publish(address,body);
  }
}
