{
  for (  Map.Entry<String,Handler<Message>> entry : handlers.entrySet()) {
    handleUnregister(sock,entry.getKey());
    eb.unregisterHandler(entry.getKey(),entry.getValue());
  }
  SockInfo info=sockInfos.remove(sock);
  if (info != null) {
    Set<String> auths=info.sockAuths;
    if (auths != null) {
      for (      String sessionID : auths) {
        Auth auth=authCache.remove(sessionID);
        if (auth != null) {
          auth.cancel();
        }
      }
    }
    PingInfo pingInfo=info.pingInfo;
    if (pingInfo != null) {
      vertx.cancelTimer(pingInfo.timerID);
    }
  }
  handleSocketClosed(sock);
}
