{
  VerticleHolder holder=getVerticleHolder();
  Deployment dep=holder == null ? null : holder.deployment;
  while (dep != null) {
    if (dep.modID != null) {
      return dep.modID;
    }
 else {
      String parentDepName=dep.parentDeploymentName;
      if (parentDepName != null) {
        dep=deployments.get(parentDepName);
      }
 else {
        return ModuleIdentifier.createInternalModIDForVerticle(dep.name);
      }
    }
  }
  return null;
}
