{
  checkWorkerContext();
  File modDir=locateModule(modRoot,currentModDir,modID);
  if (modDir != null) {
    ModuleInfo info=loadModuleInfo(modDir,modID);
    deployModuleFromModJson(info.modJSON,depName,modID,config,instances,modDir,currentModDir,info.cp,modRoot,ha,doneHandler);
  }
 else {
    JsonObject modJSON;
    if (modID.toString().equals(MODULE_NAME_SYS_PROP)) {
      modJSON=loadModJSONFromClasspath(modID,platformClassLoader);
    }
 else {
      modJSON=null;
    }
    if (modJSON != null) {
      deployModuleFromModJson(modJSON,depName,modID,config,instances,modDir,currentModDir,new ArrayList<URL>(),modRoot,ha,doneHandler);
    }
 else {
      doInstallMod(modID);
      deployModuleFromFileSystem(modRoot,depName,modID,config,instances,currentModDir,ha,doneHandler);
    }
  }
}
