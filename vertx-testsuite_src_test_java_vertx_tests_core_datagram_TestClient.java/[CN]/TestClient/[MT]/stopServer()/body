{
  if (peer2 != null) {
    peer2.close(new AsyncResultHandler<Void>(){
      @Override public void handle(      AsyncResult<Void> event){
        tu.checkThread();
        TestClient.super.stop();
      }
    }
);
  }
 else {
    TestClient.super.stop();
  }
}
