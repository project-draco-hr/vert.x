{
  if (conn.metrics().isEnabled())   conn.metrics().bytesRead(conn.remoteAddress(),bytesRead);
  bytesRead=0;
  conn.metrics().responseEnd(request,this);
  if (paused) {
    hasPausedEnd=true;
    pausedTrailer=trailer;
  }
 else {
    this.trailer=trailer;
    trailers=new HeadersAdaptor(trailer.trailingHeaders());
    if (endHandler != null) {
      endHandler.handle(null);
    }
  }
}
