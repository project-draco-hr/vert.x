{
  tu=new TestUtils(vertx);
  server=vertx.createNetServer();
  server.connectHandler(getConnectHandler());
  Integer port=vertx.sharedData().<String,Integer>getMap("params").get("listenport");
  int p=port == null ? 1234 : port;
  server.listen(p,new AsyncResultHandler<NetServer>(){
    @Override public void handle(    AsyncResult<NetServer> ar){
      if (ar.succeeded()) {
        if (sendAppReady) {
          tu.appReady();
        }
        startedResult.setResult(null);
      }
 else {
        ar.cause().printStackTrace();
      }
    }
  }
);
}
