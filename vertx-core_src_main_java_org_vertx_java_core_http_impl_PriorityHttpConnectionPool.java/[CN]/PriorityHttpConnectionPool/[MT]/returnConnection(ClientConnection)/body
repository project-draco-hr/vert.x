{
  Waiter waiter;
synchronized (this) {
    waiter=waiters.poll();
    if (waiter == null) {
      available.add(conn);
    }
  }
  if (waiter != null) {
    final Waiter w=waiter;
    w.context.execute(new Runnable(){
      public void run(){
        w.handler.handle(conn);
      }
    }
);
  }
}
