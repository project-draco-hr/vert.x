{
  Waiter waiter;
synchronized (this) {
    connectionCount--;
    if (conn != null) {
      allConnections.remove(conn);
      available.remove(conn);
    }
    if (connectionCount < maxPoolSize) {
      waiter=waiters.poll();
      if (waiter != null) {
        connectionCount++;
      }
    }
 else {
      waiter=null;
    }
  }
  if (waiter != null) {
    connect(waiter.handler,waiter.connectionExceptionHandler,waiter.context);
  }
}
