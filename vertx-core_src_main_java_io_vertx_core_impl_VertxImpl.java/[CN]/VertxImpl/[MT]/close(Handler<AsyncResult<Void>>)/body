{
  if (sharedHttpServers != null) {
    for (    HttpServer server : new HashSet<>(sharedHttpServers.values())) {
      server.close();
    }
    sharedHttpServers.clear();
  }
  if (sharedNetServers != null) {
    for (    NetServer server : new HashSet<>(sharedNetServers.values())) {
      server.close();
    }
    sharedNetServers.clear();
  }
  if (backgroundPool != null) {
    backgroundPool.shutdown();
  }
  try {
    if (backgroundPool != null) {
      backgroundPool.awaitTermination(20,TimeUnit.SECONDS);
    }
  }
 catch (  InterruptedException ex) {
  }
  if (eventLoopGroup != null) {
    eventLoopGroup.shutdownGracefully();
  }
  eventBus.close(doneHandler);
  checker.close();
  setContext(null);
}
