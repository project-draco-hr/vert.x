{
  if (currentRequest == null) {
    throw new IllegalStateException("No write in progress");
  }
  currentRequest=null;
  listener.requestEnded(this);
}
