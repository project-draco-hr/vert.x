{
  tu=new TestUtils(vertx);
  server=vertx.createHttpServer().websocketHandler(new Handler<ServerWebSocket>(){
    public void handle(    final ServerWebSocket ws){
      tu.checkThread();
      vertx.sharedData().getSet("instances").add(id);
      vertx.sharedData().getSet("connections").add(UUID.randomUUID().toString());
      ws.close();
    }
  }
);
  server.listen(8080,new AsyncResultHandler<HttpServer>(){
    @Override public void handle(    AsyncResult<HttpServer> ar){
      tu.azzert(ar.succeeded());
      tu.appReady();
      result.setResult(null);
    }
  }
);
}
