{
  this.vertx=vertx;
  this.clusterMgr=clusterManager;
  this.haManager=haManager;
  this.metrics=vertx.metricsSPI().createMetrics(this);
  this.pingInterval=pingInterval;
  this.pingReplyInterval=pingReplyInterval;
  this.subs=subs;
  this.systemCodecs=systemCodecs();
  this.serverID=serverID;
  this.server=server.netServer;
  this.sendNoContext=vertx.getOrCreateContext();
  setServerHandler(server);
  addFailoverCompleteHandler();
}
