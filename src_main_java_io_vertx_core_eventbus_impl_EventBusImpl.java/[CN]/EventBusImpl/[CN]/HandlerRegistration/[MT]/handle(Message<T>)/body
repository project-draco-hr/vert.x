{
  if (paused) {
    if (pending.size() < maxBufferedMessages) {
      pending.add(event);
    }
 else {
      if (discardHandler != null) {
        discardHandler.handle(event);
      }
    }
  }
 else {
    checkNextTick();
    metrics.beginHandleMessage(metric);
    try {
      handler.handle(event);
      metrics.endHandleMessage(metric,null);
    }
 catch (    Exception e) {
      metrics.endHandleMessage(metric,e);
      throw e;
    }
  }
}
