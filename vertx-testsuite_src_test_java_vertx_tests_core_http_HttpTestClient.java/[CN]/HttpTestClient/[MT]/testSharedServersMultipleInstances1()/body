{
  if (client.isKeepAlive()) {
    client.setKeepAlive(false);
  }
  final int numRequests=vertx.sharedData().<String,Integer>getMap("params").get("numRequests");
  final AtomicInteger counter=new AtomicInteger(0);
  for (int i=0; i < numRequests; i++) {
    client.getNow("someurl",new Handler<HttpClientResponse>(){
      public void handle(      HttpClientResponse resp){
        int count=counter.incrementAndGet();
        if (count == numRequests) {
          tu.testComplete();
        }
      }
    }
);
  }
}
