{
  AsyncResultHandler<HttpServer> handler=new AsyncResultHandler<HttpServer>(){
    @Override public void handle(    AsyncResult<HttpServer> ar){
      tu.azzert(ar.succeeded());
      client.getNow("/foo",new Handler<HttpClientResponse>(){
        @Override public void handle(        HttpClientResponse resp){
          tu.testComplete();
        }
      }
);
    }
  }
;
  startServer(new Handler<HttpServerRequest>(){
    @Override public void handle(    HttpServerRequest request){
      String uri=request.absoluteURI().toString();
      tu.azzert("http://localhost:8080/foo".equals(uri));
      request.response().end();
    }
  }
,handler);
}
