{
  AsyncResultHandler<HttpServer> handler=new AsyncResultHandler<HttpServer>(){
    @Override public void handle(    AsyncResult<HttpServer> ar){
      tu.azzert(ar.succeeded());
      try {
        server.requestHandler(new Handler<HttpServerRequest>(){
          public void handle(          HttpServerRequest req){
          }
        }
);
        tu.azzert(false,"Should throw exception");
      }
 catch (      IllegalStateException e) {
      }
      try {
        server.websocketHandler(new Handler<ServerWebSocket>(){
          public void handle(          ServerWebSocket ws){
          }
        }
);
        tu.azzert(false,"Should throw exception");
      }
 catch (      IllegalStateException e) {
      }
      tu.testComplete();
    }
  }
;
  startServer(new Handler<HttpServerRequest>(){
    public void handle(    HttpServerRequest req){
    }
  }
,handler);
}
