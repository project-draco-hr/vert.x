{
  ended=true;
  if (decoder != null) {
    try {
      decoder.offer(LastHttpContent.EMPTY_LAST_CONTENT);
      while (decoder.hasNext()) {
        InterfaceHttpData data=decoder.next();
        if (data instanceof Attribute) {
          Attribute attr=(Attribute)data;
          try {
            formAttributes().add(attr.getName(),attr.getValue());
          }
 catch (          Exception e) {
            handleException(e);
          }
        }
      }
    }
 catch (    HttpPostRequestDecoder.EndOfDataDecoderException e) {
    }
catch (    Exception e) {
      handleException(e);
    }
 finally {
      decoder.destroy();
    }
  }
  if (endHandler != null) {
    endHandler.handle(null);
  }
}
