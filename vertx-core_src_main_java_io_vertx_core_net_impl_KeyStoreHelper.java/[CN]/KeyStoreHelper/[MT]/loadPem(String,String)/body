{
  String pem=new String(Files.readAllBytes(new File(path).toPath()));
  String beginDelimiter="-----BEGIN " + delimiter + "-----";
  String endDelimiter="-----END " + delimiter + "-----";
  int begin=pem.indexOf(beginDelimiter);
  if (begin == -1) {
    throw new RuntimeException("Missing " + beginDelimiter + " delimiter");
  }
  begin+=beginDelimiter.length();
  int end=pem.indexOf(endDelimiter,begin);
  if (end == -1) {
    throw new RuntimeException("Missing " + endDelimiter + " delimiter");
  }
  String content=pem.substring(begin,end);
  content=content.replaceAll("\\s","");
  if (content.length() == 0) {
    throw new RuntimeException("Empty pem file");
  }
  return Base64.getDecoder().decode(content);
}
