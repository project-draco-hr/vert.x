{
  Thread current=Thread.currentThread();
  boolean correct=current == contextThread;
  if (expectRightThread) {
    if (!(current instanceof VertxThread)) {
      throw new IllegalStateException("Expected to be on Vert.x thread, but actually on: " + current);
    }
 else     if (!correct && contextThread != null) {
      throw new IllegalStateException("Event delivered on unexpected thread " + current + " expected: "+ contextThread);
    }
  }
  return correct;
}
