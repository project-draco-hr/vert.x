{
  Files.walkFileTree(root,new SimpleFileVisitor<Path>(){
    @Override public FileVisitResult preVisitDirectory(    Path dir,    BasicFileAttributes attrs) throws IOException {
      final WatchKey key=register(dir);
      keyToFile.put(key,dir.toFile());
      return FileVisitResult.CONTINUE;
    }
  }
);
}
