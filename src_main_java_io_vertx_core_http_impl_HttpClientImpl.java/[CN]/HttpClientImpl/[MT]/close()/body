{
synchronized (this) {
    checkClosed();
    closed=true;
  }
  if (creatingContext != null) {
    creatingContext.removeCloseHook(closeHook);
  }
  pool.close();
  for (  ClientConnection conn : connectionMap.values()) {
    conn.close();
  }
  metrics.close();
}
