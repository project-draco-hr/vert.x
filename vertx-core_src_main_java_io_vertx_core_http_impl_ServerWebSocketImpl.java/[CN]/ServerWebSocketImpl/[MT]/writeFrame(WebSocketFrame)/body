{
  if (connectRunnable != null) {
    if (rejected) {
      throw new IllegalStateException("Cannot write to websocket, it has been rejected");
    }
    if (!connected && !closed) {
      connect();
    }
  }
  super.writeFrame(frame);
}
