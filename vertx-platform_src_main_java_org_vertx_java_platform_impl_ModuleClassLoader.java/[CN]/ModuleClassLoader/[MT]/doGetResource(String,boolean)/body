{
  incRecurseDepth();
  try {
    URL url=platformClassLoader.getResource(name);
    if (url == null) {
      url=findResource(name);
      if (url == null) {
        Set<ModuleClassLoader> walked=getWalked();
        walked.add(this);
        for (        ModuleReference parent : allToWalk) {
          if (!checkAlreadyWalked(walked,parent)) {
            url=parent.mcl.doGetResource(name,considerTCCL);
            if (url != null) {
              return url;
            }
          }
        }
        walked.remove(this);
        if (considerTCCL && loadResourcesFromTCCL) {
          walked.clear();
          ModuleClassLoader tccl=(ModuleClassLoader)Thread.currentThread().getContextClassLoader();
          if (tccl != this) {
            url=tccl.doGetResource(name,false);
            if (url != null) {
              return url;
            }
          }
        }
      }
    }
    return url;
  }
  finally {
    checkClearTLs();
  }
}
