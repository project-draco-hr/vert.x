{
  if (resp == null || resp.statusCode() == 100) {
    int status;
    String statusMessage;
    try {
      status=Integer.parseInt(headers.status().toString());
      statusMessage=HttpResponseStatus.valueOf(status).reasonPhrase();
    }
 catch (    Exception e) {
      handleException(e);
      encoder.writeRstStream(handlerCtx,stream.id(),0x01,handlerCtx.newPromise());
      handlerCtx.flush();
      return;
    }
    resp=new HttpClientResponseImpl(req,HttpVersion.HTTP_2,this,status,statusMessage,new Http2HeadersAdaptor(headers));
    req.handleResponse(resp);
    if (end) {
      handleEnd();
    }
  }
 else   if (end) {
    resp.handleEnd(null,new Http2HeadersAdaptor(headers));
  }
}
