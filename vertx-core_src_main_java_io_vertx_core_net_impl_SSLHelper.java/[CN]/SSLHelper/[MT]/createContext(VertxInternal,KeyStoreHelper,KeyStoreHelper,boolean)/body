{
  try {
    SSLContext context=SSLContext.getInstance("TLS");
    KeyManager[] keyMgrs=ksHelper == null ? null : ksHelper.getKeyMgrs(vertx);
    TrustManager[] trustMgrs;
    if (trustAll) {
      trustMgrs=new TrustManager[]{createTrustAllTrustManager()};
    }
 else {
      trustMgrs=tsHelper == null ? null : tsHelper.getTrustMgrs(vertx);
    }
    context.init(keyMgrs,trustMgrs,new SecureRandom());
    return context;
  }
 catch (  Exception e) {
    log.error("Failed to create context",e);
    throw new RuntimeException(e.getMessage());
  }
}
