{
  Cluster cluster=new Cluster();
  cluster.nodes.add(new NodeMods("group1",2));
  cluster.createCluster();
  NodeMods mods0=new NodeMods().addDeployment(new DepInfo("io.vertx~ha-test1~1.0")).addDeployment(new DepInfo("io.vertx~ha-test2~1.0"));
  cluster.deployModsNoCheck(0,mods0);
  Thread.sleep(500);
  assertTrue(cluster.pms.get(0).getDeployments().isEmpty());
  cluster.addNode(new NodeMods("group1",2));
  cluster.checkModulesDeployed(0,mods0);
  cluster.closeNode(1);
  cluster.checkNoModulesDeployed(0);
  cluster.addNode(new NodeMods("group1",2));
  cluster.checkModulesDeployedStill(0);
  cluster.closeCluster();
}
