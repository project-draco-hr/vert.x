{
  TestVerticle verticle=new TestVerticle();
  vertx.deployVerticle(verticle);
  long start=System.currentTimeMillis();
  long timeout=2000;
  while (true) {
    if (vertx.deployments().size() == 1) {
      break;
    }
    Thread.sleep(10);
    long now=System.currentTimeMillis();
    if (now - start > timeout) {
      throw new IllegalStateException("Timed out");
    }
  }
}
