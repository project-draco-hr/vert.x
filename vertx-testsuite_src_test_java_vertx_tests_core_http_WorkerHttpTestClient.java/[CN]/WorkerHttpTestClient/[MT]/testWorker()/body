{
  final HttpServer server=vertx.createHttpServer();
  server.requestHandler(new Handler<HttpServerRequest>(){
    public void handle(    HttpServerRequest req){
      req.response().end();
    }
  }
);
  server.listen(8080,new AsyncResultHandler<HttpServer>(){
    @Override public void handle(    AsyncResult<HttpServer> ar){
      tu.azzert(ar.succeeded());
      final HttpClient client=vertx.createHttpClient().setPort(8080);
      client.getNow("some-uri",new Handler<HttpClientResponse>(){
        public void handle(        HttpClientResponse resp){
          server.close(new AsyncResultHandler<Void>(){
            public void handle(            AsyncResult<Void> done){
              client.close();
              tu.testComplete();
            }
          }
);
        }
      }
);
    }
  }
);
}
