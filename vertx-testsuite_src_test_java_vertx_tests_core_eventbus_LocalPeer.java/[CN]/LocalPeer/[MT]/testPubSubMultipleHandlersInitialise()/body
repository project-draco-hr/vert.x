{
  final String address2="some-other-address";
  final Handler<Message<Buffer>> otherHandler=new Handler<Message<Buffer>>(){
    public void handle(    Message msg){
      tu.azzert(false,"Should not receive message");
    }
  }
;
  eb.registerHandler(address2,otherHandler);
  final String address="some-address";
  eb.registerHandler(address,new Handler<Message<Buffer>>(){
    public void handle(    Message<Buffer> msg){
      tu.checkThread();
      tu.azzert(TestUtils.buffersEqual((Buffer)data.get("buffer"),msg.body()));
      eb.unregisterHandler(address,this,new AsyncResultHandler<Void>(){
        public void handle(        AsyncResult<Void> event){
          if (event.succeeded()) {
            tu.testComplete();
          }
 else {
            tu.azzert(false,"Failed to unregister");
          }
        }
      }
);
      eb.unregisterHandler(address,otherHandler);
    }
  }
,new AsyncResultHandler<Void>(){
    public void handle(    AsyncResult<Void> event){
      if (event.succeeded()) {
        tu.testComplete();
      }
 else {
        tu.azzert(false,"Failed to register");
      }
    }
  }
);
}
