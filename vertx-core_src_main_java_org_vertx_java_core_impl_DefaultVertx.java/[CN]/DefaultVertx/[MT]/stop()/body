{
  if (sharedHttpServers != null) {
    for (    HttpServer server : sharedHttpServers.values()) {
      server.close();
    }
    sharedHttpServers=null;
  }
  if (sharedNetServers != null) {
    for (    NetServer server : sharedNetServers.values()) {
      server.close();
    }
    sharedNetServers=null;
  }
  if (backgroundPool != null) {
    backgroundPool.shutdown();
  }
  try {
    if (backgroundPool != null) {
      backgroundPool.awaitTermination(20,TimeUnit.SECONDS);
      backgroundPool=null;
    }
  }
 catch (  InterruptedException ex) {
  }
  if (eventLoopGroup != null) {
    eventLoopGroup.shutdownGracefully();
    eventLoopGroup=null;
  }
  eventBus.close(null);
  setContext(null);
}
