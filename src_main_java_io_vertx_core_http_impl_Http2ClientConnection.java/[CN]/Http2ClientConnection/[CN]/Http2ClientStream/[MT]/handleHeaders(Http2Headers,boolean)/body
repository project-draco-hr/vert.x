{
  if (response == null || response.statusCode() == 100) {
    int status;
    String statusMessage;
    try {
      status=Integer.parseInt(headers.status().toString());
      statusMessage=HttpResponseStatus.valueOf(status).reasonPhrase();
    }
 catch (    Exception e) {
      e.printStackTrace();
      handleException(e);
      encoder.writeRstStream(handlerContext,stream.id(),0x01,handlerContext.newPromise());
      channel.flush();
      return;
    }
    response=new HttpClientResponseImpl(request,HttpVersion.HTTP_2,this,status,statusMessage,new Http2HeadersAdaptor(headers));
    request.handleResponse(response);
    if (end) {
      handleEnd();
    }
  }
 else   if (end) {
    response.handleEnd(null,new Http2HeadersAdaptor(headers));
  }
}
