{
  Map<String,Object> converted=new LinkedHashMap<>(map.size());
  for (  Map.Entry<String,Object> entry : map.entrySet()) {
    Object obj=entry.getValue();
    if (obj instanceof Map) {
      Map<String,Object> jm=(Map<String,Object>)obj;
      converted.put(entry.getKey(),convertMap(jm));
    }
 else     if (obj instanceof List) {
      List<Object> list=(List<Object>)obj;
      converted.put(entry.getKey(),convertList(list));
    }
 else     if (obj == null || obj instanceof String || obj instanceof Number || obj instanceof Boolean) {
      converted.put(entry.getKey(),obj);
    }
 else {
      throw new VertxException("Cannot have objects of class " + obj.getClass() + " in JSON");
    }
  }
  return converted;
}
