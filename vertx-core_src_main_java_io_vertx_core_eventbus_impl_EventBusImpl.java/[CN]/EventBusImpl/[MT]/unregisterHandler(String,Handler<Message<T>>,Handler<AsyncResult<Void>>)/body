{
  checkStarted();
  Handlers handlers=handlerMap.get(address);
  if (handlers != null) {
synchronized (handlers) {
      int size=handlers.list.size();
      for (int i=0; i < size; i++) {
        HandlerHolder holder=handlers.list.get(i);
        if (holder.handler == handler) {
          if (holder.timeoutID != -1) {
            vertx.cancelTimer(holder.timeoutID);
          }
          handlers.list.remove(i);
          holder.setRemoved();
          if (handlers.list.isEmpty()) {
            handlerMap.remove(address);
            if (subs != null && !holder.localOnly) {
              removeSub(address,serverID,completionHandler);
            }
 else             if (completionHandler != null) {
              callCompletionHandlerAsync(completionHandler);
            }
          }
 else           if (completionHandler != null) {
            callCompletionHandlerAsync(completionHandler);
          }
          holder.context.removeCloseHook(new HandlerEntry<T>(address,handler));
          break;
        }
      }
    }
  }
}
