{
  if (body instanceof Shareable) {
    return this;
  }
 else   if (body instanceof Copyable) {
    Copyable copyable=(Copyable)body;
    Object copy=copyable.copy();
    if (copy == body) {
      throw new IllegalStateException("copy() must actually copy the object");
    }
    @SuppressWarnings("unchecked") Message<T> ret=new ObjectMessage(send,address,copy,decodedType,codec);
    return ret;
  }
 else {
    throw new IllegalArgumentException(body.getClass() + " does not implement Copyable or Shareable.");
  }
}
