{
  handshaking=false;
  ChannelHandler handler=ctx.pipeline().get(HttpContentDecompressor.class);
  if (handler != null) {
    ctx.pipeline().remove(handler);
  }
  ws=new WebSocketImpl(vertx,ClientConnection.this);
  handshaker.finishHandshake(channel,response);
  log.debug("WebSocket handshake complete");
  wsConnect.handle(ws);
}
