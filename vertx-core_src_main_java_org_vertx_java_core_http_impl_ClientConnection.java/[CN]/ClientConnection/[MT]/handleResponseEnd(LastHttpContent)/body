{
  setContext();
  try {
    currentResponse.handleEnd(trailer);
  }
 catch (  Throwable t) {
    handleHandlerException(t);
  }
  if (currentResponse.statusCode() != 100 && requestForResponse.getRequest().getMethod() != HttpMethod.CONNECT) {
    listener.responseEnded(this);
  }
}
