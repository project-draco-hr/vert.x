{
  if (ended) {
    throw new IllegalStateException("Response has already been written");
  }
}
