{
  checkSendHeaders();
  ChannelFuture fut=encoder.writeData(ctx,stream.id(),chunk,0,last,ctx.newPromise());
  try {
    encoder.flowController().writePendingBytes();
  }
 catch (  Http2Exception e) {
    e.printStackTrace();
  }
  ctx.flush();
  return fut;
}
