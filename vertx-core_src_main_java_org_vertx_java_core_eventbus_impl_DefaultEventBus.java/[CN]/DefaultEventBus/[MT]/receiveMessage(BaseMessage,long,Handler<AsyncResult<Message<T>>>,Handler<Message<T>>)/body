{
  msg.bus=this;
  final Handlers handlers=handlerMap.get(msg.address);
  if (handlers != null) {
    if (msg.send) {
      HandlerHolder holder=handlers.choose();
      if (holder != null) {
        doReceive(msg,holder);
      }
    }
 else {
      for (      HandlerHolder holder : handlers.list) {
        doReceive(msg,holder);
      }
    }
  }
 else {
    if (asyncResultHandler != null) {
      sendNoHandlersFailure(asyncResultHandler);
      if (timeoutID != -1) {
        vertx.cancelTimer(timeoutID);
      }
      if (replyHandler != null) {
        unregisterHandler(msg.replyAddress,replyHandler);
      }
    }
  }
}
