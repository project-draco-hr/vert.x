{
  ServerBootstrap bootstrap=new ServerBootstrap();
  bootstrap.channel(NioServerSocketChannel.class);
  bootstrap.group(new NioEventLoopGroup());
  bootstrap.childHandler(new ChannelInitializer<Channel>(){
    @Override protected void initChannel(    Channel ch) throws Exception {
      SSLHelper sslHelper=new SSLHelper(serverOptions,KeyStoreHelper.create((VertxInternal)vertx,getServerCertOptions(KeyCert.JKS)),null);
      SslHandler sslHandler=sslHelper.createSslHandler((VertxInternal)vertx,false,DEFAULT_HTTPS_HOST,DEFAULT_HTTPS_PORT,true);
      ch.pipeline().addLast(sslHandler);
      ch.pipeline().addLast(new ApplicationProtocolNegotiationHandler("whatever"){
        @Override protected void configurePipeline(        ChannelHandlerContext ctx,        String protocol){
          if (ApplicationProtocolNames.HTTP_2.equals(protocol)) {
            ChannelPipeline p=ctx.pipeline();
            createHttpConnectionHandler(handler);
            Http2ConnectionHandler clientHandler=createHttpConnectionHandler(handler);
            p.addLast("handler",clientHandler);
            return;
          }
          ctx.close();
          throw new IllegalStateException("unknown protocol: " + protocol);
        }
      }
);
    }
  }
);
  return bootstrap;
}
