{
  final long start=System.currentTimeMillis();
  String address="some-address";
  eb.sendWithTimeout(address,"foo",TIMEOUT,new Handler<AsyncResult<Message<String>>>(){
    boolean replied;
    @Override public void handle(    AsyncResult<Message<String>> reply){
      tu.azzert(!replied);
      tu.azzert(reply.failed());
      tu.azzert(System.currentTimeMillis() - start >= TIMEOUT);
      vertx.setTimer(TIMEOUT * 2,new Handler<Long>(){
        @Override public void handle(        Long tid){
          tu.testComplete();
        }
      }
);
      replied=true;
    }
  }
);
}
